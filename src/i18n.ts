type Locale = 'en' | 'de';

type TranslationParams = Record<string, string | number>;

const TRANSLATIONS = {
    en: {
        'options.title': 'Options',
        'options.cellShape.label': 'Cell shapes',
        'options.cellShape.square': 'All squares',
        'options.cellShape.shaped': 'Color-specific shapes',
        'options.language.label': 'Language',
        'options.language.english': 'English',
        'options.language.german': 'German',
        'options.audio.label': 'Audio',
        'options.performance.label': 'Animations',
        'options.lead': 'Configure the experience to suit your play style.',
        'options.performance.high': 'Full effects',
        'options.performance.low': 'Performance mode',
        'options.audio.on': 'Audio on',
        'options.audio.off': 'Audio off',
        'options.recording.label': 'Recording',
        'options.recording.on': 'Recording on',
        'options.recording.off': 'Recording off',
        'options.exit': 'Exit game',
        'options.deleteProgress': 'Delete game progress',
        'options.deleteProgress.confirm': 'Do you really want to delete all your game progress?',
        'options.deleteProgress.confirmButton': 'Delete progress',
        'options.deleteProgress.cancelButton': 'Cancel',
        'options.info': 'Information',
        'options.infoLink.legal': 'Legal notice',
        'options.infoLink.privacy': 'Privacy policy',
        'mainMenu.lead': 'Welcome to',
        'mainMenu.description':
            'Combine colorful candies, trigger explosions, and beat the level targets. Jump into Level Mode, chase a new high score in Blocker Mode, or test the speeding-up Time Mode.',
        'mainMenu.note': 'High scores are stored along with your level progress. Open the options menu via the top-right button.',
        'button.levelMode': 'Level Mode',
        'button.blockerMode': 'Blocker Mode',
        'button.timeMode': 'Time Mode',
        'button.leaderboard': 'Leaderboard',
        'button.shop': 'Shop',
        'button.continue': 'Continue',
        'button.restart': 'Restart',
        'button.home': 'Home',
        'button.candyWorld': 'Candy World',
        'button.back': 'Back',
        'button.account': 'Account',
        'button.tutorial': 'Tutorial',
        'levelSelect.title': 'Candy World',
        'levelSelect.subtitle': 'Choose a level to replay or keep moving forward.',
        'levelSelect.selectedTitle': 'Level {level}',
        'levelSelect.metaMoves': '{moves} moves',
        'levelSelect.metaDifficulty': 'Difficulty: {difficulty}',
        'levelSelect.timeGoal': 'Time goal: {time}',
        'levelSelect.targetGoal': 'Target {target} points',
        'levelSelect.location.vendorPlaza': 'Vendor Plaza ‚Äî riverside market full of treats',
        'levelSelect.location.ribbonAlley': 'Ribbon Alley ‚Äî lantern-lit streets and candy shacks',
        'levelSelect.location.lanternBridge': 'Lantern Bridge ‚Äî bridges glowing with festive lights',
        'levelSelect.location.festival':
            'Festival Grounds ‚Äî the final showdown where fireworks light the sky',
        'levelSelect.playButton': 'Play level',
        'levelSelect.playButtonLabel': 'Play level {level}',
        'levelSelect.goalsTitle': 'Goals',
        'levelSelect.nodeLabel': 'Level {level}',
        'levelSelect.nodeLockedLabel': 'Level {level} locked',
        'difficulty.easy': 'Easy',
        'difficulty.normal': 'Normal',
        'difficulty.hard': 'Hard',
        'difficulty.expert': 'Expert',
        'difficulty.nightmare': 'Nightmare',
        'auth.label': 'Google Login',
        'auth.status.notSignedIn': 'Not signed in',
        'auth.status.signedIn': 'Signed in as {name}',
        'auth.progress.level': 'Progress: Level {level}',
        'auth.progress.blocker': 'Blocker high score: {score}',
        'auth.progress.time': 'Time mode best: {time}',
        'auth.progress.coins': 'Sugar coins: {coins}',
        'auth.progress.coins.loading': 'Sugar coins are loading...',
        'auth.progress.loading': 'Progress is loading...',
        'auth.progress.blocker.loading': 'Loading blocker high score...',
        'auth.progress.time.loading': 'Loading time mode...',
        'auth.hint': 'Sign in before playing so your progress is tied to your account.',
        'auth.googleInfo.prefix': 'By signing up via Google, you agree that your name and game progress will be processed in accordance with our',
        'auth.googleInfo.link': 'privacy policy',
        'auth.googleInfo.suffix': '.',
        'auth.loginButton': 'Sign in with Google',
        'auth.error.loginFailed': 'Login failed. Please try again.',
        'auth.error.progressLoad': 'Progress could not be loaded. Default level 1 will be used.',
        'auth.error.progressSave': 'Progress could not be saved. Please check your connection.',
        'auth.error.progressDelete': 'Progress could not be deleted. Please try again later.',
        'auth.error.accountDelete': 'Account could not be deleted. Please try again later.',
        'hud.status.ready': 'Ready for combos!',
        'hud.status.noMoves': 'No moves possible. Shuffling!',
        'hud.status.powerupCanceled': 'Powerup canceled!',
        'hud.label.time': 'Time',
        'hud.label.moves': 'Moves',
        'hud.label.goals': 'Goals',
        'hud.label.multiplier': 'Mult.',
        'hud.status.chooseAdjacent': 'Select a neighboring cell',
        'hud.status.targetAdjacent': 'Target must be adjacent',
        'hud.status.powerupActivated': '{powerup} activated!',
        'hud.status.chooseTarget': 'Choose target for {powerup}',
        'hud.status.powerupUnleashed': '{powerup} unleashed!',
        'hud.status.switchExecuted': 'Switch executed!',
        'hud.aria.remainingTime': 'Remaining time {current} of {capacity}',
        'hud.aria.scoreBlocker': 'Score {score} of {target}. Best run: {best}',
        'hud.aria.scoreNormal': 'Score {score} of {target}',
        'hud.goal.remaining': '{description} remaining: {remaining}',
        'hud.timeModeHint': 'Survived: {survived} ¬∑ Best time: {best}',
        'hud.blockerHighscore': 'Highscore: {score}',
        'hud.audio.on': 'Audio on',
        'hud.audio.off': 'Audio off',
        'renderer.comboIncrease': 'Strong move!',
        'renderer.comboDecrease': 'Momentum lost!',
        'renderer.comboNeutral': 'Multiplier',
        'renderer.points': ' ¬∑ +{points} points',
        'recording.title': 'Recorded gameplay',
        'recording.close': 'Close',
        'recording.label.none': 'No labels',
        'recording.label.axis': 'Axis labels',
        'recording.label.cell': 'Cell labels',
        'recording.control.prev': 'Prev',
        'recording.control.next': 'Next',
        'recording.control.auto': 'Auto play',
        'recording.control.pause': 'Pause',
        'recording.mode.manual': 'manual',
        'recording.mode.auto': 'auto',
        'recording.mode.powerup.shuffle': 'üîÄ shuffle powerup',
        'recording.mode.powerup.swap': 'üîÅ swap powerup',
        'recording.mode.powerup.bomb': 'üí£ bomb powerup',
        'result.level.winTitle': 'Level {level} complete!',
        'result.level.loseTitle': 'Level failed!',
        'result.level.winNext': 'Next stop is Level {level}.',
        'result.level.winAll': 'You mastered all {count} levels. Keep playing the finale for high scores.',
        'result.level.loseText': 'Try again right away.',
        'result.blocker.newHighscore': 'New high score!',
        'result.blocker.gameOver': 'No moves left!',
        'result.blocker.text': 'Points: {score}. Best run: {best}. Try again?',
        'result.time.newBest': 'New best time!',
        'result.time.timeUp': "Time's up!",
        'result.time.text': 'Survived: {survived}. Best time: {best}. Try again?',
        'blocker.status.started': 'Blocker Mode started. Survive as long as possible.',
        'blocker.status.moreHardCandy': 'More hard candies appear!',
        'blocker.status.newHighscore': 'New high score!',
        'time.status.started': 'Survive as long as possible. Matches and goals reward time.',
        'time.status.goalComplete': 'Goal complete! +{seconds}s',
        'leaderboard.lead': 'Overview',
        'leaderboard.title': 'Leaderboard',
        'leaderboard.back': 'Back to menu',
        'leaderboard.mode.level': 'Level Mode',
        'leaderboard.mode.blocker': 'Blocker Mode',
        'leaderboard.mode.time': 'Time Mode',
        'leaderboard.scope.global': 'Global',
        'leaderboard.scope.personal': 'Personal',
        'leaderboard.scope.label': 'Scope',
        'leaderboard.loginRequired': 'Please sign in to see personal results.',
        'leaderboard.error.loadFailed': 'Leaderboard could not be loaded.',
        'leaderboard.loading': 'Leaderboard is loading...',
        'leaderboard.empty': 'No entries available.',
        'leaderboard.metric.level': 'Highest level',
        'leaderboard.metric.time': 'Survival time',
        'leaderboard.metric.blocker': 'Blocker score',
        'leaderboard.entry.level': 'Level {level}',
        'leaderboard.entry.points': '{points} points',
        'leaderboard.subtitle.countOne': '{count} entry',
        'leaderboard.subtitle.countOther': '{count} entries',
        'leaderboard.subtitleTemplate': '{mode} ‚Üí {scope} ‚Üí {countLabel}',
        'leaderboard.localPlayer': 'You',
        'account.title': 'My Account',
        'account.field.name': 'Name',
        'account.status.google': 'Google account',
        'account.status.guest': 'Guest profile',
        'account.editButton': 'Edit account',
        'account.guestDefaultName': 'Guest',
        'account.name.saveButton': 'Save name',
        'account.name.saved': 'Name saved',
        'account.name.error.empty': 'Please enter a name.',
        'account.name.error.generic': 'Changes could not be saved. Try again later.',
        'account.logoutGoogle': 'Logout from Google',
        'account.deleteAccount': 'Delete account',
        'account.deleteAccount.confirm': 'Do you really want to delete your Google account and all stored progress?',
        'account.deleteAccount.confirmButton': 'Delete account',
        'powerup.shuffle.label': 'Shuffle',
        'powerup.shuffle.description': 'Rearrange all candies',
        'powerup.switch.label': 'Switch',
        'powerup.switch.description': 'Swap two adjacent cells without a match',
        'powerup.bomb.label': 'Bomb',
        'powerup.bomb.description': 'Clear a 4√ó4 area of your choice',
        'shop.title': 'Sugar Shop',
        'shop.lead': 'Spend sugar coins on tactical advantages.',
        'shop.ownedLabel': 'Owned:',
        'shop.count': 'Owned: {count}/{max}',
        'shop.price': '{price}',
        'shop.priceAria': 'Price: {price} sugar coins',
        'shop.priceMaxed': 'Maxed out',
        'shop.maxLabel': 'MAX',
        'shop.button.buy': 'Buy',
        'shop.feedback.insufficient': 'Not enough sugar coins.',
        'shop.feedback.maxed': 'You already own every slot for this powerup.',
        'tutorial.title': 'Candy Guide',
        'tutorial.lead': 'Learn the basics of boosters, matches, and special tiles.',
        'tutorial.section.boosters': 'Boosters',
        'tutorial.section.matches': 'Matches',
        'tutorial.section.bombMatches': 'Bomb matches',
        'tutorial.section.mechanics': 'Game Mechanics',
        'tutorial.section.obstacles': 'Obstacles',
        'tutorial.section.modes': 'Modes',
        'tutorial.boosters.lead': 'The shop sells three tactical powerups that can be used mid-level.',
        'tutorial.matches.lead':
            'Bombs are activated by matching the right color. There are 5 different colors and the match has to be of the same color.',
        'tutorial.matches.threeTitle': 'Match 3',
        'tutorial.matches.threeText': 'Clear the candies and score points.',
        'tutorial.matches.fourTitle': 'Match 4',
        'tutorial.matches.fourText': 'Creates a line bomb.',
        'tutorial.matches.fiveTitle': 'Match 5',
        'tutorial.matches.fiveText': 'Creates a large blast bomb. A match 5 bomb is activated by clicking on it.',
        'tutorial.matches.lTitle': 'L Match',
        'tutorial.matches.lText': 'Creates a medium blast bomb.',
        'tutorial.matches.tTitle': 'T Match',
        'tutorial.matches.tText': 'Creates a medium blast bomb.',
        'tutorial.matches.squareTitle': 'Square (2x2)',
        'tutorial.matches.squareText': 'Creates a small blast bomb.',
        'tutorial.bombMatches.comboText': 'Combine bombs for a larger blast.',
        'tutorial.bombMatches.lineLineTitle': 'Line bomb + Line bomb',
        'tutorial.bombMatches.lineSmallTitle': 'Line bomb + Small blast bomb',
        'tutorial.bombMatches.lineMediumTitle': 'Line bomb + Medium blast bomb',
        'tutorial.bombMatches.lineLargeTitle': 'Line bomb + Large blast bomb',
        'tutorial.bombMatches.smallSmallTitle': 'Small blast bomb + Small blast bomb',
        'tutorial.bombMatches.smallMediumTitle': 'Small blast bomb + Medium blast bomb',
        'tutorial.bombMatches.smallLargeTitle': 'Small blast bomb + Large blast bomb',
        'tutorial.bombMatches.mediumMediumTitle': 'Medium blast bomb + Medium blast bomb',
        'tutorial.bombMatches.mediumLargeTitle': 'Medium blast bomb + Large blast bomb',
        'tutorial.bombMatches.largeLargeTitle': 'Large blast bomb + Large blast bomb',
        'tutorial.mechanics.multiplierText':
            'The score multiplier rises after strong moves, drops after weak or empty moves, and applies to every point you earn.',
        'tutorial.obstacles.hardTitle': 'Hard candies',
        'tutorial.obstacles.hardText': 'Adjacent matches crack them before they can be cleared.',
        'tutorial.obstacles.chestTitle': 'Sugar chests',
        'tutorial.obstacles.chestText':
            'Adjacent matches crack them until they burst into sugar coins. It takes 3 adjacent matches to break a chest.',
        'tutorial.obstacles.generatorTitle': 'Blocker generators',
        'tutorial.obstacles.generatorText': 'Every few matches they create new hard candies nearby.',
        'tutorial.modes.levelTitle': 'Level Mode',
        'tutorial.modes.levelText':
            'Finish goals with limited moves. Difficulties: Easy, Normal, Hard, Expert, Nightmare.',
        'tutorial.modes.blockerTitle': 'Blocker Mode',
        'tutorial.modes.blockerText': 'Survive as hard candies spread and chase a high score.',
        'tutorial.modes.timeTitle': 'Time Mode',
        'tutorial.modes.timeText': 'Beat the clock as it speeds up; matches add time.',
        'goal.destroyColor': 'Destroy {target} {color} tiles',
        'goal.destroyHardCandies': 'Destroy {target} hard candies',
        'goal.activateBooster': 'Activate {target} {booster}',
        'color.red': 'red',
        'color.amber': 'amber',
        'color.blue': 'blue',
        'color.purple': 'purple',
        'color.green': 'green',
        'booster.LINE': 'line bombs',
        'booster.BURST_SMALL': 'small bombs',
        'booster.BURST_MEDIUM': 'medium bombs',
        'booster.BURST_LARGE': 'large bombs'
    },
    de: {
        'options.title': 'Optionen',
        'options.cellShape.label': 'Zellformen',
        'options.cellShape.square': 'Alle Quadrate',
        'options.cellShape.shaped': 'Farb-spezifische Formen',
        'options.language.label': 'Sprache',
        'options.language.english': 'Englisch',
        'options.language.german': 'Deutsch',
        'options.audio.label': 'Audio',
        'options.performance.label': 'Animationen',
        'options.lead': 'Passe das Erlebnis deinem Stil an.',
        'options.performance.high': 'Volle Effekte',
        'options.performance.low': 'Performance-Modus',
        'options.audio.on': 'Audio an',
        'options.audio.off': 'Audio aus',
        'options.recording.label': 'Aufzeichnung',
        'options.recording.on': 'Aufzeichnung an',
        'options.recording.off': 'Aufzeichnung aus',
        'options.exit': 'Spiel beenden',
        'options.deleteProgress': 'Spielstand l√∂schen',
        'options.deleteProgress.confirm': 'M√∂chtest du wirklich deinen gesamten Spielstand l√∂schen?',
        'options.deleteProgress.confirmButton': 'Spielstand l√∂schen',
        'options.deleteProgress.cancelButton': 'Abbrechen',
        'options.info': 'Info',
        'options.infoLink.legal': 'Impressum',
        'options.infoLink.privacy': 'Datenschutzerkl√§rung',
        'mainMenu.lead': 'Willkommen zu',
        'mainMenu.description':
            'Kombiniere farbige S√º√üigkeiten, l√∂se Explosionen aus und knacke die Levelziele. Starte im Level Modus, sichere dir im Blocker Modus einen neuen Highscore oder teste den neuen Zeit Modus mit stetig schneller werdender Uhr.',
        'mainMenu.note':
            'Highscores werden wie dein Level-Fortschritt gespeichert. Optionen √ºber das Men√º oben rechts √∂ffnen.',
        'button.levelMode': 'Level Modus',
        'button.blockerMode': 'Blocker Modus',
        'button.timeMode': 'Zeit Modus',
        'button.leaderboard': 'Bestenliste',
        'button.shop': 'Shop',
        'button.continue': 'Weiter',
        'button.restart': 'Neu starten',
        'button.home': 'Hauptmen√º',
        'button.candyWorld': 'Zuckerwelt',
        'button.back': 'Zur√ºck',
        'button.account': 'Konto',
        'button.tutorial': 'Tutorial',
        'levelSelect.title': 'Zuckerwelt',
        'levelSelect.subtitle': 'W√§hle ein Level zum Wiederholen oder mache weiter.',
        'levelSelect.selectedTitle': 'Level {level}',
        'levelSelect.metaMoves': '{moves} Z√ºge',
        'levelSelect.metaDifficulty': 'Schwierigkeit: {difficulty}',
        'levelSelect.timeGoal': 'Zeitlimit: {time}',
        'levelSelect.targetGoal': 'Ziel {target} Punkte',
        'levelSelect.location.vendorPlaza': 'Verk√§uferplatz ‚Äì ein gesch√§ftiger Markt am Fluss',
        'levelSelect.location.ribbonAlley': 'Bandgasse ‚Äì Laternenlichter und S√º√üigkeitenbuden',
        'levelSelect.location.lanternBridge': 'Laternenbr√ºcke ‚Äì Br√ºcken leuchten im Festtagsglanz',
        'levelSelect.location.festival': 'Festivalgel√§nde ‚Äì das gro√üe Finale unter Feuerwerk',
        'levelSelect.playButton': 'Level starten',
        'levelSelect.playButtonLabel': 'Level {level} starten',
        'levelSelect.goalsTitle': 'Ziele',
        'levelSelect.nodeLabel': 'Level {level}',
        'levelSelect.nodeLockedLabel': 'Level {level} gesperrt',
        'difficulty.easy': 'Leicht',
        'difficulty.normal': 'Normal',
        'difficulty.hard': 'Schwer',
        'difficulty.expert': 'Experte',
        'difficulty.nightmare': 'Albtraum',
        'auth.label': 'Google Login',
        'auth.status.notSignedIn': 'Nicht angemeldet',
        'auth.status.signedIn': 'Angemeldet als {name}',
        'auth.progress.level': 'Fortschritt: Level {level}',
        'auth.progress.blocker': 'Blocker-Modus-Highscore: {score}',
        'auth.progress.time': 'Zeit-Modus-Bestzeit: {time}',
        'auth.progress.coins': 'Zuckerm√ºnzen: {coins}',
        'auth.progress.coins.loading': 'Zuckerm√ºnzen werden geladen...',
        'auth.progress.loading': 'Fortschritt wird geladen...',
        'auth.progress.blocker.loading': 'Blocker-Highscore wird geladen...',
        'auth.progress.time.loading': 'Zeit-Modus wird geladen...',
        'auth.hint': 'Vor Spielstart bitte anmelden, damit der Fortschritt deinem Konto zugeordnet wird.',
        'auth.googleInfo.prefix': 'Wenn du dich √ºber Google anmeldest, erkl√§rst du dich damit einverstanden, dass dein Name und Spielstand gem√§√ü unserer',
        'auth.googleInfo.link': 'Datenschutzerkl√§rung',
        'auth.googleInfo.suffix': '.',
        'auth.loginButton': 'Mit Google anmelden',
        'auth.error.loginFailed': 'Anmeldung fehlgeschlagen. Bitte erneut versuchen.',
        'auth.error.progressLoad': 'Fortschritt konnte nicht geladen werden. Standard-Level 1 wird verwendet.',
        'auth.error.progressSave': 'Fortschritt konnte nicht gespeichert werden. Bitte Verbindung pr√ºfen.',
        'auth.error.progressDelete': 'Fortschritt konnte nicht gel√∂scht werden. Bitte versuche es sp√§ter erneut.',
        'auth.error.accountDelete': 'Account konnte nicht gel√∂scht werden. Bitte versuche es sp√§ter erneut.',
        'hud.status.ready': 'Bereit f√ºr Kombos!',
        'hud.status.noMoves': 'Keine Z√ºge mehr m√∂glich. Wir mischen!',
        'hud.label.time': 'Zeit',
        'hud.label.moves': 'Z√ºge',
        'hud.label.goals': 'Ziele',
        'hud.label.multiplier': 'Mult.',
        'hud.status.chooseAdjacent': 'W√§hle ein angrenzendes Feld',
        'hud.status.targetAdjacent': 'Ziel muss angrenzend sein',
        'hud.status.powerupActivated': '{powerup} aktiviert!',
        'hud.status.chooseTarget': 'W√§hle Ziel f√ºr {powerup}',
        'hud.status.powerupCanceled': 'Powerup abgebrochen!',
        'hud.status.powerupUnleashed': '{powerup} entfesselt!',
        'hud.status.switchExecuted': 'Switch ausgef√ºhrt!',
        'hud.aria.remainingTime': 'Verbleibende Zeit {current} von {capacity}',
        'hud.aria.scoreBlocker': 'Punktestand {score} von {target}. Bester Lauf: {best}',
        'hud.aria.scoreNormal': 'Punktestand {score} von {target}',
        'hud.goal.remaining': '{description} verbleibend: {remaining}',
        'hud.timeModeHint': '√úberlebt: {survived} ¬∑ Bestzeit: {best}',
        'hud.blockerHighscore': 'Highscore: {score}',
        'hud.audio.on': 'Audio an',
        'hud.audio.off': 'Audio aus',
        'renderer.comboIncrease': 'Starker Zug!',
        'renderer.comboDecrease': 'Tempo verloren!',
        'renderer.comboNeutral': 'Multiplikator',
        'renderer.points': ' ¬∑ +{points} Punkte',
        'recording.title': 'Aufzeichnung',
        'recording.close': 'Schlie√üen',
        'recording.label.none': 'Keine Beschr.',
        'recording.label.axis': 'Achse',
        'recording.label.cell': 'Zellen',
        'recording.control.prev': 'Zur√ºck',
        'recording.control.next': 'Weiter',
        'recording.control.auto': 'Auto',
        'recording.control.pause': 'Pause',
        'recording.mode.manual': 'manuell',
        'recording.mode.auto': 'auto',
        'recording.mode.powerup.shuffle': 'üîÄ Shuffle',
        'recording.mode.powerup.swap': 'üîÅ Swap',
        'recording.mode.powerup.bomb': 'üí£ Bombe',
        'result.level.winTitle': 'Level {level} geschafft!',
        'result.level.loseTitle': 'Level verloren!',
        'result.level.winNext': 'Weiter geht es mit Level {level}.',
        'result.level.winAll': 'Du hast alle {count} Level gemeistert. Spiele das Finale weiter f√ºr Highscores.',
        'result.level.loseText': 'Versuche es direkt noch einmal.',
        'result.blocker.newHighscore': 'Neuer Highscore!',
        'result.blocker.gameOver': 'Keine Z√ºge mehr!',
        'result.blocker.text': 'Punkte: {score}. Bester Lauf: {best}. Gleich noch einmal?',
        'result.time.newBest': 'Neue Bestzeit!',
        'result.time.timeUp': 'Zeit abgelaufen!',
        'result.time.text': '√úberlebt: {survived}. Bestzeit: {best}. Noch einmal?',
        'blocker.status.started': 'Blocker-Modus gestartet. √úberlebe so lange wie m√∂glich.',
        'blocker.status.moreHardCandy': 'Mehr harte Bonbons erscheinen!',
        'blocker.status.newHighscore': 'Neuer Highscore!',
        'time.status.started': '√úberlebe so lange wie m√∂glich. Zeit gibt es f√ºr Matches und Ziele.',
        'time.status.goalComplete': 'Ziel geschafft! +{seconds}s',
        'leaderboard.lead': '√úbersicht',
        'leaderboard.title': 'Bestenliste',
        'leaderboard.back': 'Zur√ºck zum Men√º',
        'leaderboard.mode.level': 'Level-Modus',
        'leaderboard.mode.blocker': 'Blocker-Modus',
        'leaderboard.mode.time': 'Zeit-Modus',
        'leaderboard.scope.global': 'Global',
        'leaderboard.scope.personal': 'Pers√∂nlich',
        'leaderboard.scope.label': 'Bereich',
        'leaderboard.loginRequired': 'Bitte anmelden, um pers√∂nliche Ergebnisse zu sehen.',
        'leaderboard.error.loadFailed': 'Bestenliste konnte nicht geladen werden.',
        'leaderboard.loading': 'Bestenliste wird geladen...',
        'leaderboard.empty': 'Keine Eintr√§ge vorhanden.',
        'leaderboard.metric.level': 'Erreichtes Level',
        'leaderboard.metric.time': '√úberlebenszeit',
        'leaderboard.metric.blocker': 'Blocker-Score',
        'leaderboard.entry.level': 'Level {level}',
        'leaderboard.entry.points': '{points} Punkte',
        'leaderboard.subtitle.countOne': '{count} Eintrag',
        'leaderboard.subtitle.countOther': '{count} Eintr√§ge',
        'leaderboard.subtitleTemplate': '{mode} ‚Üí {scope} ‚Üí {countLabel}',
        'leaderboard.localPlayer': 'Du',
        'account.title': 'Mein Konto',
        'account.field.name': 'Name',
        'account.status.google': 'Google-Konto',
        'account.status.guest': 'Gastprofil',
        'account.editButton': 'Account bearbeiten',
        'account.guestDefaultName': 'Gast',
        'account.name.saveButton': 'Name speichern',
        'account.name.saved': 'Name gespeichert',
        'account.name.error.empty': 'Bitte gib einen Namen ein.',
        'account.name.error.generic': '√Ñnderungen konnten nicht gespeichert werden. Versuche es sp√§ter erneut.',
        'account.logoutGoogle': 'Abmelden von Google',
        'account.deleteAccount': 'Account l√∂schen',
        'account.deleteAccount.confirm': 'M√∂chtest du wirklich dein Google-Konto und alle gespeicherten Fortschritte l√∂schen?',
        'account.deleteAccount.confirmButton': 'Account l√∂schen',
        'powerup.shuffle.label': 'Mischen',
        'powerup.shuffle.description': 'Alle Bonbons neu anordnen',
        'powerup.switch.label': 'Switch',
        'powerup.switch.description': 'Tausche zwei benachbarte Felder ohne Match',
        'powerup.bomb.label': 'Bombe',
        'powerup.bomb.description': 'Sprengt ein 4√ó4-Feld deiner Wahl',
        'shop.title': 'Zuckerladen',
        'shop.lead': 'Gib Zuckerm√ºnzen f√ºr taktische Vorteile aus.',
        'shop.ownedLabel': 'Besessen:',
        'shop.count': 'Besessen: {count}/{max}',
        'shop.price': '{price}',
        'shop.priceAria': 'Preis: {price} Zuckerm√ºnzen',
        'shop.priceMaxed': 'Maximal erreicht',
        'shop.maxLabel': 'MAX',
        'shop.button.buy': 'Kaufen',
        'shop.feedback.insufficient': 'Nicht genug Zuckerm√ºnzen.',
        'shop.feedback.maxed': 'Du besitzt bereits alle Slots f√ºr dieses Powerup.',
        'tutorial.title': 'Candy Guide',
        'tutorial.lead': 'Lerne die Grundlagen zu Boostern, Matches und Spezialfeldern.',
        'tutorial.section.boosters': 'Booster',
        'tutorial.section.matches': 'Matches',
        'tutorial.section.bombMatches': 'Bomben-Matches',
        'tutorial.section.mechanics': 'Spielmechanik',
        'tutorial.section.obstacles': 'Hindernisse',
        'tutorial.section.modes': 'Modi',
        'tutorial.boosters.lead': 'Im Shop gibt es drei taktische Powerups, die du im Level einsetzen kannst.',
        'tutorial.matches.lead':
            'Bomben werden aktiviert, indem du die richtige Farbe matchst. Es gibt 5 verschiedene Farben und das Match muss die gleiche Farbe haben.',
        'tutorial.matches.threeTitle': 'Match 3',
        'tutorial.matches.threeText': 'R√§ume die Bonbons ab und sammle Punkte.',
        'tutorial.matches.fourTitle': 'Match 4',
        'tutorial.matches.fourText': 'Erzeugt eine Linienbombe.',
        'tutorial.matches.fiveTitle': 'Match 5',
        'tutorial.matches.fiveText':
            'Erzeugt eine gro√üe Explosionsbombe. Eine Match-5-Bombe wird durch Anklicken aktiviert.',
        'tutorial.matches.lTitle': 'L-Match',
        'tutorial.matches.lText': 'Erzeugt eine mittlere Explosionsbombe.',
        'tutorial.matches.tTitle': 'T-Match',
        'tutorial.matches.tText': 'Erzeugt eine mittlere Explosionsbombe.',
        'tutorial.matches.squareTitle': 'Quadrat (2x2)',
        'tutorial.matches.squareText': 'Erzeugt eine kleine Explosionsbombe.',
        'tutorial.bombMatches.comboText': 'Kombiniere Bomben f√ºr eine gr√∂√üere Explosion.',
        'tutorial.bombMatches.lineLineTitle': 'Linienbombe + Linienbombe',
        'tutorial.bombMatches.lineSmallTitle': 'Linienbombe + Kleine Explosionsbombe',
        'tutorial.bombMatches.lineMediumTitle': 'Linienbombe + Mittlere Explosionsbombe',
        'tutorial.bombMatches.lineLargeTitle': 'Linienbombe + Gro√üe Explosionsbombe',
        'tutorial.bombMatches.smallSmallTitle': 'Kleine Explosionsbombe + Kleine Explosionsbombe',
        'tutorial.bombMatches.smallMediumTitle': 'Kleine Explosionsbombe + Mittlere Explosionsbombe',
        'tutorial.bombMatches.smallLargeTitle': 'Kleine Explosionsbombe + Gro√üe Explosionsbombe',
        'tutorial.bombMatches.mediumMediumTitle': 'Mittlere Explosionsbombe + Mittlere Explosionsbombe',
        'tutorial.bombMatches.mediumLargeTitle': 'Mittlere Explosionsbombe + Gro√üe Explosionsbombe',
        'tutorial.bombMatches.largeLargeTitle': 'Gro√üe Explosionsbombe + Gro√üe Explosionsbombe',
        'tutorial.mechanics.multiplierText':
            'Der Punkte-Multiplikator steigt nach starken Z√ºgen, f√§llt nach schwachen oder leeren Z√ºgen und gilt f√ºr jeden Punkt.',
        'tutorial.obstacles.hardTitle': 'Harte Bonbons',
        'tutorial.obstacles.hardText': 'Benachbarte Matches knacken sie, bevor sie entfernt werden.',
        'tutorial.obstacles.chestTitle': 'Zuckerkisten',
        'tutorial.obstacles.chestText':
            'Benachbarte Matches knacken sie, bis sie in Zuckerm√ºnzen platzen. Es braucht 3 benachbarte Matches, um eine Kiste zu sprengen.',
        'tutorial.obstacles.generatorTitle': 'Blocker-Generatoren',
        'tutorial.obstacles.generatorText': 'Alle paar Matches erzeugen sie in der N√§he neue harte Bonbons.',
        'tutorial.modes.levelTitle': 'Level Modus',
        'tutorial.modes.levelText':
            'Erf√ºlle Ziele mit begrenzten Z√ºgen. Schwierigkeitsgrade: Easy, Normal, Hard, Expert, Nightmare.',
        'tutorial.modes.blockerTitle': 'Blocker Modus',
        'tutorial.modes.blockerText': '√úberlebe, w√§hrend harte Bonbons sich ausbreiten, und jage einen Highscore.',
        'tutorial.modes.timeTitle': 'Zeit Modus',
        'tutorial.modes.timeText': 'Schlage die Uhr, w√§hrend sie schneller wird; Matches geben Zeit.',
        'goal.destroyColor': 'Zerst√∂re {target} {color} Steine',
        'goal.destroyHardCandies': 'Zerst√∂re {target} harte Bonbons',
        'goal.activateBooster': 'Aktiviere {target} {booster}',
        'color.red': 'rote',
        'color.amber': 'gelbe',
        'color.blue': 'blaue',
        'color.purple': 'violette',
        'color.green': 'gr√ºne',
        'booster.LINE': 'Linienbomben',
        'booster.BURST_SMALL': 'kleine Bomben',
        'booster.BURST_MEDIUM': 'mittlere Bomben',
        'booster.BURST_LARGE': 'gro√üe Bomben'
    }
} as const;

type TranslationKey = keyof typeof TRANSLATIONS['en'];

const listeners = new Set<(locale: Locale) => void>();

let currentLocale: Locale = 'en';

function formatTranslation(template: string, params?: TranslationParams): string {
    if (!params) {
        return template;
    }
    return template.replace(/\{(\w+)\}/g, (_, key) => {
        const value = params[key];
        return value !== undefined ? String(value) : '';
    });
}

function t(key: TranslationKey, params?: TranslationParams): string {
    const localized = TRANSLATIONS[currentLocale][key] ?? TRANSLATIONS['en'][key];
    return formatTranslation(localized, params);
}

function translateDocument(root: ParentNode = document): void {
    const elements = root.querySelectorAll<HTMLElement>('[data-i18n-key]');
    elements.forEach((element) => {
        const key = element.getAttribute('data-i18n-key') as TranslationKey | null;
        if (!key) return;
        element.textContent = t(key);
    });
}

function setLocale(locale: Locale): void {
    if (locale === currentLocale) return;
    currentLocale = locale;
    document.documentElement.lang = locale;
    translateDocument();
    listeners.forEach((listener) => listener(locale));
}

function getLocale(): Locale {
    return currentLocale;
}

function onLocaleChange(handler: (locale: Locale) => void): () => void {
    handler(currentLocale);
    listeners.add(handler);
    return () => {
        listeners.delete(handler);
    };
}

export { Locale, TranslationKey, t, setLocale, getLocale, onLocaleChange, translateDocument };
